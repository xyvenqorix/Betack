<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280"> <title>CineVerse | El Engaño</title>
    <style>
        :root { --red: #ff3c3c; --bg: #050505; --glass: rgba(255,255,255,0.05); }
        body { background: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; padding-bottom: 50px; }

        /* --- CONTENEDOR PC --- */
        .pc-monitor {
            width: 800px;
            height: 500px;
            margin: 50px auto;
            background: #111;
            border: 15px solid #d1d1d1; /* Marco estilo Mac */
            border-radius: 30px;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 242, 255, 0.2);
            overflow: hidden;
        }

        .pc-monitor::after { /* Soporte de la PC */
            content: '';
            position: absolute;
            bottom: -65px; left: 50%;
            transform: translateX(-50%);
            width: 150px; height: 50px;
            background: #a1a1a1;
            clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
        }

        .screen-content { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #000; }
        .screen-content iframe { width: 100%; height: 100%; border: none; }
        
        #placeholder-img { width: 100%; height: 100%; object-fit: cover; }

        /* --- SELECTOR --- */
        .selector-section { text-align: center; margin-top: 100px; }
        .title-prompt { font-size: 2rem; color: var(--red); margin-bottom: 20px; text-shadow: 0 0 10px rgba(255,60,60,0.5); }
        
        .season-btns { display: flex; justify-content: center; gap: 15px; margin-bottom: 40px; }
        .btn-t { background: transparent; border: 2px solid #333; color: white; padding: 10px 30px; border-radius: 8px; cursor: pointer; font-size: 1.2rem; }
        .btn-t.active { border-color: var(--red); box-shadow: 0 0 15px var(--red); }

        /* --- GRID CAPITULOS --- */
        .episodes-grid {
            width: 1000px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            background: var(--glass);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid #222;
        }

        .ep-card {
            background: #151515;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: 0.3s;
            border: 1px solid transparent;
        }

        .ep-card:hover { transform: translateY(-5px); border-color: var(--red); }
        .ep-card img { width: 100%; height: 120px; object-fit: cover; opacity: 0.7; }
        .ep-info { padding: 10px; font-size: 0.9rem; text-align: center; }
    </style>
</head>
<body>

    <div class="pc-monitor">
        <div class="screen-content" id="screen">
            <img id="placeholder-img" src="" alt="Poster">
        </div>
    </div>

    <div class="selector-section">
        <div class="title-prompt">Elegir Temporada:</div>
        <div class="season-btns" id="seasons-nav"></div>
    </div>

    <div class="episodes-grid" id="episodes-list"></div>

    <script>
        let globalData = null;

        // Cargar JSON
        fetch('database.json')
            .then(res => res.json())
            .then(data => {
                globalData = data;
                document.getElementById('placeholder-img').src = data.poster;
                renderSeasons();
                loadSeason(1);
            });

        function renderSeasons() {
            const nav = document.getElementById('seasons-nav');
            globalData.temporadas.forEach(t => {
                nav.innerHTML += `<button class="btn-t ${t.id===1?'active':''}" onclick="loadSeason(${t.id})">${t.nombre}</button>`;
            });
        }

        function loadSeason(id) {
            const grid = document.getElementById('episodes-list');
            grid.innerHTML = "";
            const season = globalData.temporadas.find(t => t.id === id);
            
            season.capitulos.forEach(cap => {
                grid.innerHTML += `
                    <div class="ep-card" onclick="playVideo('${btoa(cap.embed)}')">
                        <img src="${cap.thumb}">
                        <div class="ep-info">Capítulo ${cap.num}: ${cap.titulo}</div>
                    </div>
                `;
            });
        }

        function playVideo(encodedEmbed) {
            const screen = document.getElementById('screen');
            // Decodificamos el embed e inyectamos
            screen.innerHTML = atob(encodedEmbed);
        }
    </script>
</body>
</html>
