<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280"> <title>CineVerse Pro | Series</title>
    <style>
        :root { --red: #ff3c3c; --bg: #080808; }
        body { background: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; }

        /* --- HEADER --- */
        header { padding: 20px 50px; background: #000; border-bottom: 2px solid var(--red); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 900; letter-spacing: 3px; font-size: 1.5rem; cursor: pointer; }

        /* --- SELECCIÓN DE SERIES (CUADRITOS) --- */
        #catalog { display: flex; justify-content: center; gap: 30px; padding: 50px; }
        .serie-card { 
            width: 172px; cursor: pointer; transition: 0.3s; 
            border: 2px solid transparent; border-radius: 10px; overflow: hidden;
        }
        .serie-card:hover { transform: translateY(-10px); border-color: var(--red); box-shadow: 0 0 20px var(--red); }
        .serie-card img { width: 100%; height: 256px; object-fit: cover; }

        /* --- INTERFAZ DE REPRODUCCIÓN (OCULTA AL INICIO) --- */
        #player-view { display: none; padding-top: 30px; }

        /* MONITOR ARRIBA (FOTO) */
        .pc-preview {
            width: 700px; height: 400px; margin: 0 auto;
            border: 12px solid #ccc; border-radius: 20px; background: #000;
            position: relative; overflow: hidden;
        }
        .pc-preview img { width: 100%; height: 100%; object-fit: cover; }
        .pc-base { width: 140px; height: 40px; background: #999; margin: -5px auto 40px; clip-path: polygon(15% 0, 85% 0, 100% 100%, 0 100%); }

        /* VIDEO ABAJO */
        .video-box {
            width: 954px; height: 562px; margin: 40px auto;
            background: #000; border: 3px solid #1a1a1a; border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
        }

        .btn-cap { 
            background: var(--red); color: white; border: none; padding: 10px 20px; 
            margin: 5px; cursor: pointer; border-radius: 5px; font-weight: bold;
        }
    </style>
</head>
<body>

<header>
    <div class="logo" onclick="location.reload()">CINEVERSE <span style="color:var(--red)">PRO</span></div>
    <div id="status">ELIGE UNA SERIE</div>
</header>

<div id="catalog">
    </div>

<div id="player-view">
    <div class="pc-preview">
        <img id="monitor-foto" src="" alt="Vista previa">
    </div>
    <div class="pc-base"></div>

    <div id="cap-buttons" style="text-align: center;"></div>

    <div class="video-box" id="main-video">
        <h2 style="color:#444">ELIGE UN CAPÍTULO PARA VER AQUÍ</h2>
    </div>
</div>

<script>
    let db = null;

    // Cargar Base de Datos
    fetch('database.json')
        .then(res => res.json())
        .then(data => {
            db = data;
            const catalog = document.getElementById('catalog');
            
            // Crear los cuadros de las series
            db.series.forEach(serie => {
                catalog.innerHTML += `
                    <div class="serie-card" onclick="selectSerie('${serie.id}')">
                        <img src="${serie.poster}">
                        <p style="text-align:center">${serie.titulo}</p>
                    </div>
                `;
            });
        });

    function selectSerie(id) {
        const serie = db.series.find(s => s.id === id);
        
        // Ocultar catálogo y mostrar reproductor
        document.getElementById('catalog').style.display = 'none';
        document.getElementById('player-view').style.display = 'block';
        document.getElementById('status').innerText = serie.titulo.toUpperCase();
        
        // Poner la foto ARRIBA en el monitor
        document.getElementById('monitor-foto').src = serie.preview_foto;

        // Generar botones de capítulos
        const btnContainer = document.getElementById('cap-buttons');
        btnContainer.innerHTML = "";
        serie.capitulos.forEach(cap => {
            btnContainer.innerHTML += `
                <button class="btn-cap" onclick="playVideo('${btoa(cap.embed)}')">
                    VER CAPÍTULO ${cap.num}
                </button>
            `;
        });
    }

    function playVideo(encodedEmbed) {
        // Inyectar el video ABAJO
        document.getElementById('main-video').innerHTML = atob(encodedEmbed);
        // Bajar la pantalla automáticamente al video
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>

</body>
</html>
